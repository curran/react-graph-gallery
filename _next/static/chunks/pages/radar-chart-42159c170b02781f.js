(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3891],{2938:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/radar-chart",function(){return t(555)}])},555:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return w}});var n=t(5893);t(7294);var s=t(153),r=t(9965),i=t(7262),d=t(3572),l=t(1122),o=t(6820),h=t(505),c=t(1664),p=t.n(c),m=t(9903);let x=[{speed:5.1,acceleration:9.5,conso:1.4,safety:.1,style:90,price:7,name:"mercedes"},{speed:4.9,acceleration:3,conso:9.4,safety:.2,style:590,price:76,name:"peugeot"},{speed:2.7,acceleration:1.2,conso:1.3,safety:.9,style:990,price:96,name:"honda"}];var u=t(7875);let j=["#e0ac2b","#e85252","#6689c6","#9a6fb0","#a53253","#69b3a2"],g=e=>{let{width:a,height:t,data:s,axisConfig:r}=e,i=Math.min(a,t)/2-30,d=r.map(e=>e.name),l=u.tiA().domain(d).range([0,2*Math.PI]),o={};r.forEach(e=>{o[e.name]=u.s$j().domain([0,e.max]).range([40,i])});let h=u.XBu().angle(e=>e.angle).radius(e=>e.radius),c=s.map(e=>e.name),p=u.PKp().domain(c).range(j),m=s.map((e,a)=>{let t=r.map(a=>{var t;let n=o[a.name],s=null!==(t=l(a.name))&&void 0!==t?t:0,r=n(e[a.name]);return{angle:s,radius:r}}),s=h(t);if(s)return(0,n.jsx)("path",{d:s,stroke:p(e.name),strokeWidth:3,fill:p(e.name),fillOpacity:.1},a)}),x=r.map((e,a)=>{let t=h([{angle:l(e.name),radius:40},{angle:l(e.name),radius:i}]);return(0,n.jsx)("g",{children:(0,n.jsx)("path",{d:t,stroke:"#9d174d",fill:"#9d174d",fillOpacity:.3,strokeWidth:1,rx:1})},a)});return(0,n.jsx)("svg",{width:a,height:t,children:(0,n.jsxs)("g",{transform:"translate("+(a/2+30)+","+(t/2+30)+")",children:[m,x]})})},b=e=>{let{width:a=700,height:t=400}=e;return(0,n.jsx)(g,{data:x,width:a,height:t,axisConfig:[{name:"speed",max:10},{name:"acceleration",max:10},{name:"conso",max:10},{name:"safety",max:2},{name:"style",max:1e3},{name:"price",max:100}]})},f=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["A"," ",(0,n.jsx)("a",{href:"https://www.data-to-viz.com/caveat/spider.html",children:"radar or spider or web chart"})," ","is a two-dimensional chart type designed to plot one or more series of values over ",(0,n.jsx)("b",{children:"multiple quantitative variables"}),". Each variable has its"," ",(0,n.jsx)("b",{children:"own axis"}),", all axes are joined in the ",(0,n.jsx)("b",{children:"center"})," of the figure."]}),(0,n.jsxs)("p",{children:["This page is a step-by-step guide on how to build your own spider chart for the web, using ",(0,n.jsx)("a",{href:"https://reactjs.org/",children:"React"})," (for rendering) and ",(0,n.jsx)("a",{href:"https://d3-graph-gallery.com/histogram",children:"D3.js"})," ","(to compute the axis, and shape coordinates)."]}),(0,n.jsxs)("p",{children:["It starts by describing how the ",(0,n.jsx)("b",{children:"data"})," should be organized and how to initialize the ",(0,n.jsx)("code",{children:"Radar"})," component. It then explains how to compute axis dynamically, and plot the lines and axis. Once this is done, it shows how to deal with scaling and how to add an interactive legend. \uD83D\uDE47‍♂️."]})]});function w(){return(0,n.jsxs)(s.A,{title:"Spider chart | React graph gallery",seoDescription:"A step-by-step guide on how to build your very own spider chart react component from scratch. Comes with explanations, code sandboxes, and ready-to-use templates.",children:[(0,n.jsx)(r.Z,{title:"Radar plot",description:f,chartType:"radar"}),(0,n.jsx)("h2",{id:"data",children:"The Data"}),(0,n.jsxs)("p",{children:["The dataset provides several ",(0,n.jsx)("b",{children:"numeric"})," values for a set of data points. It can also add some ",(0,n.jsx)("b",{children:"categorical"})," variables that can be added to customize the marker colors."]}),(0,n.jsxs)("p",{children:["The suggested data structure is an array of ",(0,n.jsx)("code",{children:"object"}),", where each object is a data point. It can have as many numeric properties as needed."]}),(0,n.jsx)("br",{}),(0,n.jsx)("p",{children:"Here is a minimal example of the data structure:"}),(0,n.jsx)(d.d,{code:v}),(0,n.jsxs)("p",{children:["Note: this is the same data format as for a"," ",(0,n.jsx)(p(),{href:"/correlogram",children:"correlogram"})," or for a"," ",(0,n.jsx)(p(),{href:"parallel-plot",children:"parralel chart"}),"."]}),(0,n.jsx)("h2",{id:"skeleton",children:"Component skeleton"}),(0,n.jsxs)("p",{children:["The goal here is to create a ",(0,n.jsx)("code",{children:"Radar"})," component that will be stored in a ",(0,n.jsx)("code",{children:"Radar.tsx"})," file. This component requires 4 props to render: a ",(0,n.jsx)("code",{children:"width"}),", a ",(0,n.jsx)("code",{children:"height"}),", some"," ",(0,n.jsx)("code",{children:"data"})," and an array providing the name of the variables to display."]}),(0,n.jsxs)("p",{children:["The shape of the ",(0,n.jsx)("code",{children:"data"})," is described above. The"," ",(0,n.jsx)("code",{children:"width"})," and ",(0,n.jsx)("code",{children:"height"})," will be used to render an"," ",(0,n.jsx)("code",{children:"svg"})," element in the DOM, in which we will insert the spider chart."]}),(0,n.jsxs)("p",{children:["To put it in a nutshell, that's the skeleton of our ",(0,n.jsx)("code",{children:"Radar"})," ","component:"]}),(0,n.jsx)(d.d,{code:y}),(0,n.jsxs)("p",{children:["It's fundamental to understand that with this code organization, d3.js will be used to prepare the SVG ",(0,n.jsx)("code",{children:"circle"}),", but it's React that will render them in the ",(0,n.jsx)("code",{children:"return()"})," statement. We won't use d3 methods like ",(0,n.jsx)("code",{children:"append"})," that you can find in usual"," ",(0,n.jsx)("a",{href:"https://www.d3-graph-gallery.com",children:"d3.js examples"}),"."]}),(0,n.jsx)("h2",{id:"Scales",children:"Scales and Axes"}),(0,n.jsxs)("p",{children:["Building a parallel coordinate charts requires several ",(0,n.jsx)("b",{children:"scales"})," and"," ",(0,n.jsx)("b",{children:"axes"}),"."]}),(0,n.jsxs)("p",{children:["D3.js comes with a handful set of"," ",(0,n.jsx)("a",{href:"https://github.com/d3/d3-scale",children:"predefined scales"}),"."," ",(0,n.jsx)("code",{children:"scalePoint"})," and ",(0,n.jsx)("code",{children:"scaleLinear"})," are the ones we are goint to use here."]}),(0,n.jsx)("h3",{children:"→ X Scale"}),(0,n.jsxs)("p",{children:["We need only 1 X scale. This scale is gonna provide a position in pixels for each variable name of the dataset. Remember that a parallel coordinate chart displays several vertical lines, one per variable. The X scale is displayed ",(0,n.jsx)("b",{children:"horizontally"}),". It covers the"," ",(0,n.jsx)("code",{children:"width"})," of the ",(0,n.jsx)("code",{children:"svg"})," container, and its domain goes from the ",(0,n.jsx)("code",{children:"min"})," to the ",(0,n.jsx)("code",{children:"max"})," of the dataset."]}),(0,n.jsx)(d.d,{code:k}),(0,n.jsx)("h3",{children:"→ Y Scale"}),(0,n.jsxs)("p",{children:["The Y scale is displayed ",(0,n.jsx)("b",{children:"vertically"}),". It shows how many items are available in each bin. To compute it you need to find the bucket with the highest number of items. Something like:"]}),(0,n.jsx)(d.d,{code:T}),(0,n.jsx)(l.$,{VizComponent:m.H,vizName:"ParallelCoordinateAxesOnly",maxWidth:800,height:800,caption:"Values of the dataset as distributed into bins. Bins are represented as rectangles. Data wrangling is made with d3.js, rendering with react."}),(0,n.jsx)("h2",{id:"bars",children:"Drawing the lines"}),(0,n.jsx)("p",{children:"Finally! ✨"}),(0,n.jsxs)("p",{children:["We can now ",(0,n.jsx)("code",{children:"map"})," through the bucket object and draw a"," ",(0,n.jsx)("b",{children:"rectangle"})," per bucket thanks to the scales computed above."]}),(0,n.jsx)("p",{children:"The code looks like this:"}),(0,n.jsx)(d.d,{code:S}),(0,n.jsxs)("p",{children:["Remember that the ",(0,n.jsx)("code",{children:"x"})," and ",(0,n.jsx)("code",{children:"y"})," attributes of the svg ",(0,n.jsx)("code",{children:"rect"})," element provide the x and y position of the top left corner of the rectangle (see"," ",(0,n.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/SVG/Element/rect",children:"doc"}),"). This is why the rectangle ",(0,n.jsx)("code",{children:"height"})," is computed by subtracting ",(0,n.jsx)("code",{children:"yScale(bucket.length)"})," from the total"," ",(0,n.jsx)("code",{children:"height"}),"."]}),(0,n.jsx)("br",{}),(0,n.jsx)(l.$,{VizComponent:b,vizName:"RadarBasic",maxWidth:600,height:400,caption:"Values of the dataset as distributed into bins. Bins are represented as rectangles. Data wrangling is made with d3.js, rendering with react."}),(0,n.jsx)(h.r,{chartId:"parallel"}),(0,n.jsx)(o.Z,{chartId:"parallel"}),(0,n.jsx)("div",{className:"full-bleed border-t h-0 bg-gray-100 mb-3 mt-24"}),(0,n.jsx)(i.Z,{chartFamily:"ranking"}),(0,n.jsx)("div",{className:"mt-20"})]})}let v="\nconst data = [\n  {var1: 5.1, var2: 3.5, ..., group: 'setosa'},\n  {var1: 4.9, var2: 3.0, ..., group: 'setosa'},\n  ...\n]\n".trim(),y='\nimport * as d3 from "d3"; // we will need d3.js\n\ntype DataItem = {\n  [variable: string]: number;\n} & { group: string };\n\n\ntype RadarProps = {\n  width: number;\n  height: number;\n  data: DataItem[];\n  variables: string[]\n};\n\nexport const Radar = ({ width, height, data, variables }: RadarProps) => {\n\n  // read the data & get a list of groups\n  // build X scale\n  // build Y scales: 1 per variable\n  // build color scales\n  // loop through variables to add axes\n  // loop through data items and through variables to draw lines\n\n  return (\n    <div>\n      <svg width={width} height={height}>\n        // render all the <lines>\n      </svg>\n    </div>\n  );\n};\n'.trim(),k="\nconst xScale = d3\n  .scalePoint<Variable>()\n  .range([0, boundsWidth])\n  .domain(variables)\n  .padding(0);\n".trim(),T="\nconst yScale = useMemo(() => {\n\n  const max = Math.max(...buckets.map((bucket) => bucket?.length));\n\n  return d3.scaleLinear()\n    .range([height, 0])\n    .domain([0, max]);\n\n  }, [data, height]);\n".trim(),S='\nconst allRects = buckets.map((bucket, i) => {\n  return (\n    <rect\n      key={i}\n      fill="#69b3a2"\n      stroke="black"\n      x={xScale(bucket.x0)}\n      width={xScale(bucket.x1) - xScale(bucket.x0)}\n      y={yScale(bucket.length)}\n      height={height - yScale(bucket.length)}\n    />\n  );\n});\n'.trim()}},function(e){e.O(0,[3996,7875,5660,645,1188,687,9774,2888,179],function(){return e(e.s=2938)}),_N_E=e.O()}]);